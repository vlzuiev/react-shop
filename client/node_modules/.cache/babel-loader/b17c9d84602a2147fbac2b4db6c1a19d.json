{"ast":null,"code":"var _jsxFileName = \"/Users/vladyslavzuiev/Desktop/Udemy/crwn-clothing/client/src/components/stripe-button/stripe-button.component.jsx\";\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { selectCurrentUser } from '../../redux/user/user.selectors';\nimport StripeCheckout from 'react-stripe-checkout';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\n\nconst StripeCheckoutButton = ({\n  price,\n  history\n}) => {\n  const currentUser = useSelector(selectCurrentUser);\n  const priceForStripe = price * 100;\n  const publishableKey = 'pk_test_A0v5iG1WXz4n3RCfV8uCE2gD00CpAFKE9n';\n\n  const onToken = token => {\n    axios({\n      url: 'payment',\n      method: 'post',\n      data: {\n        amount: priceForStripe,\n        token\n      }\n    }).then(response => {\n      alert('Payment was Succesful');\n    }).catch(err => {\n      console.log('Payment err: ', JSON.parse(err));\n      alert(\"There was an issue with your credit cart. Please make sure you use the provided credit card\");\n    });\n  };\n\n  return currentUser ? React.createElement(StripeCheckout, {\n    label: \"Pay Now\",\n    name: \"CRWN Clothing Ltd.\",\n    billingAddress: true,\n    shippingAddress: true,\n    image: \"https://svgshare.com/i/CUz.svg\",\n    description: `Your total is $${price}`,\n    amount: priceForStripe,\n    panelLabel: \"Pay now\",\n    token: onToken,\n    stripeKey: publishableKey,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Pay Now\")) : React.createElement(\"button\", {\n    onClick: () => history.push('/signin'),\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"Pay Now\");\n};\n\nexport default withRouter(StripeCheckoutButton);","map":{"version":3,"sources":["/Users/vladyslavzuiev/Desktop/Udemy/crwn-clothing/client/src/components/stripe-button/stripe-button.component.jsx"],"names":["React","useSelector","selectCurrentUser","StripeCheckout","withRouter","axios","StripeCheckoutButton","price","history","currentUser","priceForStripe","publishableKey","onToken","token","url","method","data","amount","then","response","alert","catch","err","console","log","JSON","parse","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,iBAAT,QAAkC,iCAAlC;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,oBAAoB,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAD,KAAwB;AACjD,QAAMC,WAAW,GAAGR,WAAW,CAACC,iBAAD,CAA/B;AAEA,QAAMQ,cAAc,GAAGH,KAAK,GAAG,GAA/B;AACA,QAAMI,cAAc,GAAG,4CAAvB;;AAEA,QAAMC,OAAO,GAAGC,KAAK,IAAI;AACrBR,IAAAA,KAAK,CAAC;AACFS,MAAAA,GAAG,EAAC,SADF;AAEFC,MAAAA,MAAM,EAAE,MAFN;AAGFC,MAAAA,IAAI,EAAE;AACFC,QAAAA,MAAM,EAAEP,cADN;AAEFG,QAAAA;AAFE;AAHJ,KAAD,CAAL,CAOGK,IAPH,CAOQC,QAAQ,IAAI;AAChBC,MAAAA,KAAK,CAAC,uBAAD,CAAL;AACH,KATD,EASGC,KATH,CASSC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BC,IAAI,CAACC,KAAL,CAAWJ,GAAX,CAA7B;AACAF,MAAAA,KAAK,CAAC,6FAAD,CAAL;AACH,KAZD;AAaH,GAdD;;AAgBA,SACIX,WAAW,GAAG,oBAAC,cAAD;AACV,IAAA,KAAK,EAAC,SADI;AAEV,IAAA,IAAI,EAAC,oBAFK;AAGV,IAAA,cAAc,MAHJ;AAIV,IAAA,eAAe,MAJL;AAKV,IAAA,KAAK,EAAC,gCALI;AAMV,IAAA,WAAW,EAAG,kBAAiBF,KAAM,EAN3B;AAOV,IAAA,MAAM,EAAEG,cAPE;AAQV,IAAA,UAAU,EAAC,SARD;AASV,IAAA,KAAK,EAAEE,OATG;AAUV,IAAA,SAAS,EAAED,cAVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWV;AAAQ,IAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAXU,CAAH,GAcS;AAAQ,IAAA,OAAO,EAAE,MAAMH,OAAO,CAACmB,IAAR,CAAa,SAAb,CAAvB;AAAgD,IAAA,SAAS,EAAC,iBAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAfxB;AAoBH,CA1CD;;AA4CA,eAAevB,UAAU,CAACE,oBAAD,CAAzB","sourcesContent":["import React from 'react'\nimport { useSelector } from 'react-redux';\nimport { selectCurrentUser } from '../../redux/user/user.selectors';\nimport StripeCheckout from 'react-stripe-checkout';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\n\nconst StripeCheckoutButton = ({ price, history }) => {\n    const currentUser = useSelector(selectCurrentUser);\n\n    const priceForStripe = price * 100;\n    const publishableKey = 'pk_test_A0v5iG1WXz4n3RCfV8uCE2gD00CpAFKE9n';\n\n    const onToken = token => {\n        axios({\n            url:'payment',\n            method: 'post',\n            data: {\n                amount: priceForStripe,\n                token\n            }\n        }).then(response => {\n            alert('Payment was Succesful');\n        }).catch(err => {\n            console.log('Payment err: ', JSON.parse(err))\n            alert(\"There was an issue with your credit cart. Please make sure you use the provided credit card\")\n        });\n    }\n\n    return (\n        currentUser ? <StripeCheckout\n            label='Pay Now'\n            name=\"CRWN Clothing Ltd.\"\n            billingAddress\n            shippingAddress\n            image='https://svgshare.com/i/CUz.svg'\n            description={`Your total is $${price}`}\n            amount={priceForStripe}\n            panelLabel='Pay now'\n            token={onToken}\n            stripeKey={publishableKey}>\n            <button className=\"btn btn-primary\">\n                Pay Now\n                </button>\n        </StripeCheckout> : <button onClick={() => history.push('/signin')} className=\"btn btn-primary\">\n                Pay Now\n                </button>\n    );\n\n};\n\nexport default withRouter(StripeCheckoutButton);"]},"metadata":{},"sourceType":"module"}